 <!DOCTYPE html>
 <html>
   <head>

     <link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>

     <meta charset="utf-8">
     <meta name="viewport" content="width=device-width, initial-scale=1">

     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.1.4/semantic.min.css" type="text/css">
     <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.2/styles/solarized_light.min.css" rel="stylesheet" />

     <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
     <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery.address/1.6/jquery.address.min.js"></script>
     <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.1.4/semantic.min.js"></script>
     <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.2/highlight.min.js"></script>
     <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.2/languages/java.min.js"></script>
     <script>hljs.initHighlightingOnLoad();</script>

      <style>


body 
{
  font-family: "Open Sans", "Helvetica", "Helvetica Neue",  "Arial", sans-serif;
}

figcaption
{
  margin-bottom: 20px;
}

.vertical-align
{
  display: flex;
  align-items: center;
}

.credits
{
  min-height:20px;
}
    </style>

  </head>

  <body>

  <div class="ui container">
<style>


code
{
  font-family: "Monaco";
  font-size: 110%;
}

img
{
  padding:1px;
  border:1px solid black;
}

h1
{
  font-style:italic;
  font-size:130%;
  border-bottom: thin solid black;
}
h2
{
  font-size:110%;
  border-bottom: thin solid black;
}
h3
{
  font-size:100%;
  border-bottom: thin solid black;
}

</style>

<div class="ui fixed top pointing inverted menu labmenu">
  <header class="header item">
    <a href="../index.html">
      <i class="sitemap icon"></i>
      2: Activities & Layouts
    </a>
  </header>
  <div class="right tab-menu menu">
    <a class="active item" data-tab="Donation-02">
        Donation-02
    </a>
      <a class="item" data-tab="01">
        01
      </a>
      <a class="item" data-tab="02">
        02
      </a>
      <a class="item" data-tab="03">
        03
      </a>
      <a class="item" data-tab="04">
        04
      </a>
      <a class="item" data-tab="05">
        05
      </a>
      <a class="item" data-tab="06">
        06
      </a>
      <a class="item" data-tab="07">
        07
      </a>
      <a class="item" data-tab="08">
        08
      </a>
      <a class="item" data-tab="09">
        09
      </a>
      <a class="item" data-tab="Exercises">
        Exercises
      </a>
    </div>
</div>

<br><br>

  <div  class="ui tab segment lab" data-tab="Donation-02">
    <h1>Objectives</h1>
<p>Introduce a second screen to display the list of donations made by the user. In addition, enable our app its first "Model" objects, which will be used to store the individual donations made by the user. </p>
  </div>
  <div  class="ui tab segment lab" data-tab="01">
    <h1>Donation-01 Solutions</h1>
<p>In this lab we shall all work on the NUC platform. </p>
<ul>
<li>
<p>At the end of the lab you will commit and push your work to your Bitbucket accounts and download it into your personal computers.</p>
</li>
<li>
<p>In the Donation-01 lab you created a repository <em>donation-android-2015</em>. Save this to a secure location. </p>
</li>
<li>
<p>In this lab we shall provide a model solution to the lab (named <em>donation-android-2015</em>) so that we will all begin this Donation-02 with exactly the same code base. There already exists a folder in the NUC named repo. Many of you may have been developing here. Therefore it is important to avoid name clashes. If a folder named <em>donation-android-2015</em> already exists in <em>repo</em>, either rename it, delete it or move it to a subfolder within repo.</p>
</li>
<li>
<p>You create a folder with the mkdir command:</p>
</li>
</ul>
<pre><code>mkdir &lt;new folder&gt;
</code></pre>

<p>For example:</p>
<pre><code>mkdir backup-projects
</code></pre>

<p>You may remove a folder and all its contents with this (dangerous) command:</p>
<pre><code>rm -rf &lt;folder name&gt;
</code></pre>

<p>You may also move a folder. For example to move a folder named folder1 into a folder2:</p>
<pre><code>mv folder 1 folder2/
</code></pre>

<p>Note: do not omit the / at the end of, for example, folder2.</p>
<p>All passwords are ictskills.</p>
<p>You may move a folder as follows. For example, move <em>donation-android-2015</em> to a backup-projects folder which is also in repo:</p>
<pre><code>mv donation-android-2015 backup-projects/
</code></pre>

<p>When you ready, download <em>donation-android-2015</em> from GitHub as follows:</p>
<pre><code>git clone https://github.com/wit-computing/donation-android-2015.git
</code></pre>

<ul>
<li>GitHub is an alternative repository hosting company to BitBucket.</li>
<li>In this instance neither a password nor an ssh key is required as the project is public.</li>
<li>When you have downloaded the project, change into its root directory:</li>
</ul>
<pre><code>cd donation-android-2015
</code></pre>

<ul>
<li>Check the commits: use your customized log command (gitp). An example is shown here.
<img alt="" src="img/12.png"></li>
<li>Check the tags: (git tag -n).<ul>
<li>There aren't any.</li>
</ul>
</li>
<li>Build on this repository, making appropriate commits and tags, as you progress through this and subsequent Donation labs.<ul>
<li>You may wish to apply a tag at the end of each lab, for example, v1, v2, v3...</li>
<li>Notice that in the downloaded project, all steps that involve code changes are committed separately. This has the advantage of being able to easily roll back to the beginning of the current step within a lab in the event that insurmountable difficulties arise.</li>
<li>Before making any commits, remove GitHub as the remote repo and reconfigure git to use your name and email address. Here is the script to do that: just insert your name and email in the placeholders. Consult <a href="https://help.github.com/articles/setting-your-username-in-git/">documentation</a> if necessary.</li>
</ul>
</li>
</ul>
<pre><code>git remote rm origin
git user.name  = &quot;your name here&quot;  &lt;------ use double quotes
git user.email = &quot;your email here&quot; &lt;------ use double quotes
git config -l &lt;------ execute this command to check
</code></pre>

<ul>
<li>Launch Android Studio and open this project.</li>
<li>If the project is not present in the Recent Projects panel, open the project as shown in Figure 1:</li>
</ul>
<p><img alt="Figure 1: Open and existing Android Studio project" src="img/10.png"></p>
<p>You may be presented with a message as shown in Figure 2 indicating an unregistered version control system (VCS).</p>
<ul>
<li>Click <strong>Add root</strong>.</li>
</ul>
<p><img alt="Figure 2: Configure git VCS" src="img/11.png"></p>
<p>Once you have opened the project in Android Studio you are ready to proceed with the lab, the first part of which is to provide solutions to the exercises at the end of Donation-01.</p>
  </div>
  <div  class="ui tab segment lab" data-tab="02">
    <h1>Package Name</h1>
<p>This version is a little misconfigured - we have a leftover - the package name 'com.example.donation' form the project generation wizard.<br> 
This can be changed as follows:</p>
<ul>
<li>With the project imported to Android Studio, select Project in the Project Structure pane.</li>
<li>Expand the folders in <em>src</em> to reveal <em>com.example.donation</em> packages in both <em>androidTest</em> and <em>main</em>.
<img alt="Figure 1: Project Structure pane" src="img/20.png"></li>
<li>Create a new package <em>app.donation</em> in <em>androidTest/java</em>.<ul>
<li>Drag the file <em>ApplicationTest</em> to this new package.</li>
</ul>
</li>
<li>Create a new package <em>app.donation</em> in <em>main/java</em>.<ul>
<li>Drag file <em>Donate</em> to this new package.</li>
</ul>
</li>
<li>Both original packages, <em>com.example.donation</em> should be deleted automatically without user intervention.
<img alt="Figure 2: Create new packages and populate by drag and drop" src="img/21.png"></li>
<li>Change the package name to <em>app.donation</em> in <em>AndroidManifest.xml</em>.
<img alt="Figure 3: Update AndroidManifest.xml" src="img/24.png"></li>
<li>Change <em>applicationID</em> to <em>app.donation</em> in build.gradle.<ul>
<li>Sync Now if prompted.
<img alt="Figure 4: Update build.gradle" src="img/22.png"></li>
</ul>
</li>
<li>Check that the import statement in <em>Donate.java</em> is as follows:</li>
</ul>
<pre><code>import android.widget.Toast;

import app.donation.R;

public class Donate extends AppCompatActivity
</code></pre>

<ul>
<li>Clean the project.
<img alt="Figure 5: Clean project" src="img/23.png"></li>
<li>Test by rebuilding (Build | Rebuild) and running (Run | Run 'app').</li>
</ul>
<p>Here is the revised structure:
<img alt="Figure 6: Revised structure" src="img/21.png"></p>
  </div>
  <div  class="ui tab segment lab" data-tab="03">
    <h1>Menu</h1>
<p>Open <code>res/values/Strings.xml</code> and introduce a new String resource like this:</p>
<pre><code class="xml">    &lt;string name=&quot;menuReport&quot;&gt;Report&lt;/string&gt;
</code></pre>

<p>We have a menu resource called 'menu_donate.xml' in the <code>res/menu</code> folder. Modify this file by adding this new menu item:</p>
<pre><code>  &lt;item
       android:id=&quot;@+id/menuReport&quot;
        android:orderInCategory=&quot;100&quot;
        android:title=&quot;@string/menuReport&quot;/&gt;

</code></pre>

<p>(Make sure it is within the <code>&lt;menu&gt;</code> element)</p>
<p>In Donate.java, change the <code>onOptionsItemSelected</code> method to look like this:</p>
<pre><code class="java">  @Override
  public boolean onOptionsItemSelected(MenuItem item)
  {
    switch (item.getItemId())
    {
      case R.id.menuReport:
        Toast toast = Toast.makeText(this, &quot;Report Selected&quot;, Toast.LENGTH_SHORT);
        toast.show();
        break;
    }
    return true;
  }
</code></pre>

<p>Run the app and when you press the menu button (or the overflow menu) and select 'Report', you should see the toast message appear.</p>
<p><img alt="" src="img/05.png"></p>
  </div>
  <div  class="ui tab segment lab" data-tab="04">
    <h1>Reports Activity</h1>
<p>Before we start to design a new activity, Add a string resource in <code>res/values/strings.xml</code>:</p>
<pre><code>&lt;string name=&quot;reportTitle&quot;&gt;Report&lt;/string&gt;
</code></pre>

<p>Design a new layout called <code>activity_report</code>. Do this by locating the <code>res/layout</code> folder and selecting <code>new-&gt;layout resource file</code>:</p>
<p><img alt="" src="img/30.png"></p>
<p>Call the layout file <code>activity_report</code></p>
<p><img alt="" src="img/31.png"></p>
<p>We would like the resource to look like this:</p>
<p><img alt="Figure 1: Report activity design view" src="img/01.png"></p>
<p>For the monment, to achieve this - just replace the xml with the following:</p>
<pre><code class="xml">&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    xmlns:tools=&quot;http://schemas.android.com/tools&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;match_parent&quot;
    android:paddingBottom=&quot;@dimen/activity_vertical_margin&quot;
    android:paddingLeft=&quot;@dimen/activity_horizontal_margin&quot;
    android:paddingRight=&quot;@dimen/activity_horizontal_margin&quot;
    android:paddingTop=&quot;@dimen/activity_vertical_margin&quot;
    tools:context=&quot;.Test&quot; &gt;

    &lt;TextView
        android:id=&quot;@+id/reportTitle&quot;
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:layout_alignParentLeft=&quot;true&quot;
        android:layout_alignParentRight=&quot;true&quot;
        android:layout_alignParentTop=&quot;true&quot;
        android:text=&quot;@string/reportTitle&quot;
        android:textAppearance=&quot;?android:attr/textAppearanceLarge&quot; /&gt;

    &lt;ListView
        android:id=&quot;@+id/reportList&quot;
        android:layout_width=&quot;match_parent&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:layout_alignLeft=&quot;@+id/reportTitle&quot;
        android:layout_below=&quot;@+id/reportTitle&quot; &gt;

    &lt;/ListView&gt;

&lt;/RelativeLayout&gt;
</code></pre>

<p>You should see the design render as above.</p>
<p>We can now introduce a new Class into app.donation to render this activity:</p>
<pre><code class="java">package app.donation;

import app.donation.R;
import android.app.Activity;
import android.os.Bundle;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class Report extends Activity
{
  ListView listView;

  static final String[] numbers = new String[] { 
      &quot;Amount, Pay method&quot;,
      &quot;10,     Direct&quot;,
      &quot;100,    PayPal&quot;,
      &quot;1000,   Direct&quot;,
      &quot;10,     PayPal&quot;,
      &quot;5000,   PayPal&quot;};

  @Override
  public void onCreate(Bundle savedInstanceState) 
  {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_report);

    listView = (ListView) findViewById(R.id.reportList);
    ArrayAdapter&lt;String&gt; adapter = new ArrayAdapter&lt;String&gt;(this,  android.R.layout.simple_list_item_1, numbers); 
    listView.setAdapter(adapter);
  }
} 
</code></pre>

<p>This will display a hard-coded lists of donations.</p>
<p>Back in Donation class, change the Donate activity to load this view when 'Report' selected from menu:</p>
<pre><code class="java">  @Override
  public boolean onOptionsItemSelected(MenuItem item)
  {
    switch (item.getItemId())
    {
      case R.id.menuReport : startActivity (new Intent(this, Report.class));
                             break;
    }
    return true;
  }
</code></pre>

<p>This requires an import statement:</p>
<pre><code>import android.content.Intent;
</code></pre>

<p>All of this will not work until you add the activity specification to the AndroidManifest.xml file:</p>
<pre><code class="xml">        &lt;activity
            android:name=&quot;app.donation.Report&quot;
            android:label=&quot;@string/donateTitle&quot; &gt;
        &lt;/activity&gt;
</code></pre>

<p>The above must be carefuly positioned - this is the full <code>AndroidManifest.xml</code> file here:</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    package=&quot;app.donation&quot; &gt;

    &lt;application
        android:allowBackup=&quot;true&quot;
        android:icon=&quot;@mipmap/ic_launcher&quot;
        android:label=&quot;@string/app_name&quot;
        android:theme=&quot;@style/AppTheme&quot; &gt;
        &lt;activity
            android:name=&quot;app.donation.Donate&quot;
            android:label=&quot;@string/app_name&quot; &gt;
            &lt;intent-filter&gt;
                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;
                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;
            &lt;/intent-filter&gt;
        &lt;/activity&gt;
        &lt;activity
            android:name=&quot;app.donation.Report&quot;
            android:label=&quot;@string/donateTitle&quot; &gt;
        &lt;/activity&gt;
    &lt;/application&gt;

&lt;/manifest&gt;
</code></pre>

<p>Note the location of the new element.</p>
<p>Try it all now - it should load. Here is an example using the inbuilt emulator (AVD).</p>
<p><img alt="Figure 2: Report rendered on Android AVD" src="img/06.png"></p>
  </div>
  <div  class="ui tab segment lab" data-tab="05">
    <h1>Application Object</h1>
<p>In order to keep out application design coherent, we now bring in an 'Application' object.</p>
<p>Create a new class called `DonationApp':</p>
<p><img alt="" src="img/33.png"></p>
<p>Incorporate this class here:</p>
<pre><code class="java">package app.donation;

import android.app.Application;
import android.util.Log;

public class DonationApp extends Application
{
  @Override
  public void onCreate()
  {
    super.onCreate();
    Log.v(&quot;Donate&quot;, &quot;Donation App Started&quot;);
  }
}
</code></pre>

<p>Application objects need to be referenced in the AndroidManifest.xml</p>
<pre><code>android:name=&quot;app.donation.DonationApp&quot;
</code></pre>

<p>It is inserted into the <code>application</code> element - here is the full manifest:</p>
<pre><code class="xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    package=&quot;app.donation&quot;&gt;

    &lt;application
        android:allowBackup=&quot;true&quot;
        android:icon=&quot;@mipmap/ic_launcher&quot;
        android:label=&quot;@string/app_name&quot;
        android:theme=&quot;@style/AppTheme&quot;
        android:name=&quot;app.donation.DonationApp&quot;&gt;
        &lt;activity
            android:name=&quot;app.donation.Donate&quot;
            android:label=&quot;@string/app_name&quot; &gt;
            &lt;intent-filter&gt;
                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;
                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;
            &lt;/intent-filter&gt;
        &lt;/activity&gt;
        &lt;activity
            android:name=&quot;app.donation.Report&quot;
            android:label=&quot;@string/donateTitle&quot; &gt;
        &lt;/activity&gt;
    &lt;/application&gt;

&lt;/manifest&gt;
</code></pre>

<p>Make sure the 'Donation App Started' appears in the logs when the application is started:</p>
<p><img alt="" src="img/08.png"></p>
<p>The filter used here is:</p>
<p><img alt="" src="img/34.png"></p>
  </div>
  <div  class="ui tab segment lab" data-tab="06">
    <h1>Donation Model</h1>
<p>Create a new class called <code>Donation</code>:</p>
<pre><code class="java">package app.donation;

public class Donation
{
  public int    amount;
  public String method;

  public Donation (int amount, String method)
  {
    this.amount = amount;
    this.method = method;
  }
}
</code></pre>

<p>This is a revised version of DonationApp class:</p>
<pre><code class="java">package app.donation;

import java.util.ArrayList;
import java.util.List;

import android.app.Application;
import android.util.Log;
import android.widget.Toast;

public class DonationApp extends Application
{
  public final int       target       = 10000;
  public int             totalDonated = 0;
  public List &lt;Donation&gt; donations    = new ArrayList&lt;Donation&gt;();

  public boolean newDonation(Donation donation)
  {
    boolean targetAchieved = totalDonated &gt; target;
    if (!targetAchieved)
    {
      donations.add(donation);
      totalDonated += donation.amount;
    }
    else
    {
      Toast toast = Toast.makeText(this, &quot;Target Exceeded!&quot;, Toast.LENGTH_SHORT);
      toast.show();
    }
    return targetAchieved;
  }

  @Override
  public void onCreate()
  {
    super.onCreate();
    Log.v(&quot;Donate&quot;, &quot;Donation App Started&quot;);
  }
}
</code></pre>

<p>It manages a list of donations. It also centralises the 'makeDonation' as as a method. </p>
  </div>
  <div  class="ui tab segment lab" data-tab="07">
    <h1>Refactored Donate</h1>
<p>The Donate activity can now be completely re factored to make use of the DonationApp object.</p>
<p>First, introduce this new member into the class:</p>
<pre><code>  private DonationApp app;
</code></pre>

<p>and in the <code>onCreate</code> meethod, initialize app:</p>
<pre><code>    app = (DonationApp) getApplication();
</code></pre>

<p>Finally, we can replace the <code>donatButtonPressed</code> method with this simplified version:</p>
<pre><code>
  public void donateButtonPressed (View view)
  {
    String method = paymentMethod.getCheckedRadioButtonId() == R.id.PayPal ? &quot;PayPal&quot; : &quot;Direct&quot;;
    int donatedAmount =  amountPicker.getValue();
    if (donatedAmount == 0)
    {
      String text = amountText.getText().toString();
      if (!text.equals(&quot;&quot;))
        donatedAmount = Integer.parseInt(text);
    }
    if (donatedAmount &gt; 0)
    {
      app.newDonation(new Donation(donatedAmount, method));
      progressBar.setProgress(app.totalDonated);
      String totalDonatedStr = &quot;$&quot; + app.totalDonated;
      amountTotal.setText(totalDonatedStr);
    }
  }
</code></pre>

<p>Try this now and see if everything works as expected.</p>
<p>Here is the complete <code>Donate</code> class if there is a problem:</p>
<pre><code class="java">package app.donation;

import android.content.Intent;
import android.support.v7.app.AppCompatActivity;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.RadioGroup;
import android.widget.NumberPicker;
import android.widget.ProgressBar;
import android.widget.TextView;

public class Donate extends AppCompatActivity
{
  private Button       donateButton;
  private RadioGroup   paymentMethod;
  private ProgressBar  progressBar;
  private NumberPicker amountPicker;
  private int          totalDonated;
  private int          target;

  private TextView     amountText;
  private TextView     amountTotal;

  private DonationApp app;

  @Override
  protected void onCreate(Bundle savedInstanceState)
  {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_donate);

    app = (DonationApp) getApplication();

    donateButton  = (Button) findViewById(R.id.donateButton);
    paymentMethod = (RadioGroup)   findViewById(R.id.paymentMethod);
    progressBar   = (ProgressBar)  findViewById(R.id.progressBar);
    amountPicker  = (NumberPicker) findViewById(R.id.amountPicker);
    amountTotal   = (TextView)     findViewById(R.id.amountTotal);
    amountText    = (EditText)     findViewById(R.id.amountText);

    amountPicker.setMinValue(0);
    amountPicker.setMaxValue(1000);
    progressBar.setMax(10000);

    totalDonated = 0;
    target = 10000;

  }

  @Override
  public boolean onCreateOptionsMenu(Menu menu)
  {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.menu_donate, menu);
    return true;
  }


  public void donateButtonPressed (View view)
  {
    String method = paymentMethod.getCheckedRadioButtonId() == R.id.PayPal ? &quot;PayPal&quot; : &quot;Direct&quot;;
    int donatedAmount =  amountPicker.getValue();
    if (donatedAmount == 0)
    {
      String text = amountText.getText().toString();
      if (!text.equals(&quot;&quot;))
        donatedAmount = Integer.parseInt(text);
    }
    if (donatedAmount &gt; 0)
    {
      app.newDonation(new Donation(donatedAmount, method));
      progressBar.setProgress(app.totalDonated);
      String totalDonatedStr = &quot;$&quot; + app.totalDonated;
      amountTotal.setText(totalDonatedStr);
    }
  }

  @Override
  public boolean onOptionsItemSelected(MenuItem item)
  {
    switch (item.getItemId())
    {
      case R.id.menuReport : startActivity (new Intent(this, Report.class));
        break;
    }
    return true;
  }
}
</code></pre>
  </div>
  <div  class="ui tab segment lab" data-tab="08">
    <h1>Refactored Report</h1>
<p>We now rework Report to render the actual donations - held in the DonationApp list.</p>
<p>First some layout additions. Include these new string in strings.xml</p>
<pre><code>    &lt;string name=&quot;defaultAmount&quot;&gt;00&lt;/string&gt;
    &lt;string name=&quot;defaultMethod&quot;&gt;N/A&lt;/string&gt;
</code></pre>

<p>In the layout folder, create a new layout called <code>row_layout.xml</code> - replace the generated contents with the following:</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;match_parent&quot; &gt;

    &lt;TextView
        android:id=&quot;@+id/row_amount&quot;
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:layout_alignParentLeft=&quot;true&quot;
        android:layout_alignParentTop=&quot;true&quot;
        android:layout_marginLeft=&quot;48dp&quot;
        android:layout_marginTop=&quot;20dp&quot;
        android:text=&quot;@string/defaultAmount&quot; /&gt;

    &lt;TextView
        android:id=&quot;@+id/row_method&quot;
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:layout_alignBaseline=&quot;@+id/row_amount&quot;
        android:layout_alignBottom=&quot;@+id/row_amount&quot;
        android:layout_marginLeft=&quot;106dp&quot;
        android:layout_toRightOf=&quot;@+id/row_amount&quot;
        android:text=&quot;@string/defaultMethod&quot; /&gt;

&lt;/RelativeLayout&gt;
</code></pre>

<p>The designer should look like this:</p>
<p><img alt="" src="img/36.png"></p>
<p>Finally, rework Report class to remove the hard coded values - and use a different 'adapter'</p>
<p>This is the complete class here:</p>
<pre><code class="java">package app.donation;

import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.TextView;
import java.util.List;

public class Report extends Activity
{
  private ListView    listView;
  private DonationApp app;

  @Override
  public void onCreate(Bundle savedInstanceState)
  {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_report);

    app = (DonationApp) getApplication();

    listView = (ListView) findViewById(R.id.reportList);
    DonationAdapter adapter = new DonationAdapter (this, app.donations);
    listView.setAdapter(adapter);
  }
}

class DonationAdapter extends ArrayAdapter&lt;Donation&gt;
{
  private Context context;
  public List&lt;Donation&gt; donations;

  public DonationAdapter(Context context, List&lt;Donation&gt; donations)
  {
    super(context, R.layout.row_layout, donations);
    this.context   = context;
    this.donations = donations;
  }

  @Override
  public View getView(int position, View convertView, ViewGroup parent)
  {
    LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    View     view       = inflater.inflate(R.layout.row_layout, parent, false);
    Donation donation   = donations.get(position);
    TextView amountView = (TextView) view.findViewById(R.id.row_amount);
    TextView methodView = (TextView) view.findViewById(R.id.row_method);

    amountView.setText(&quot;&quot; + donation.amount);
    methodView.setText(donation.method);

    return view;
  }

  @Override
  public int getCount()
  {
    return donations.size();
  }
}
</code></pre>

<p>We will discuss this version in depth in class</p>
<p>If all goes well - then you should be able to make donations, and and the see a list of these in the report activity.</p>
  </div>
  <div  class="ui tab segment lab" data-tab="09">
    <h1>Repository</h1>
<p>Here we shall describe how you can break the association with GitHub that you established to download the baseline <em>donation-android-2015</em> and push your refactored application to a new repository that you will create on your Bitbucket account.</p>
<p>Access your Bitbucket account and create a repository named <em>donation-android-2015</em></p>
<ul>
<li>If a similarly named repo already exists on your Bitbucket account then change its name to something like <em>donation-android-v1</em>:<ul>
<li>This may easily be done by:<ul>
<li>clicking on the repo to be renamed, </li>
<li>clicking on the gear wheel located on the bottom left hand side, </li>
<li>changing the name under Repository details | Name</li>
<li>Pressing the <em>Save repository details</em> button.</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><img alt="Figure 1" src="img/28.png"></p>
<p>On the NUC cd into <em>donation-android-2015</em> and run the following commands in sequence.</p>
<pre><code>git remote rm origin
</code></pre>

<p>This last command removes the association with GitHub.</p>
<p>Now bring your local repo up to date, associate it with the newly created repo on Bitbucket and push all:</p>
<pre><code>
git add .

git commit -m &quot;Donation-02 lab complete&quot;

</code></pre>

<p>Before running this next command it will be necessary to replace the placeholders <font color='red'>jdoe@wit.ie</font> and <font color='red'>jdoe</font> with the email you registered on Bitbucket and your login id:</p>
<pre><code>git remote add origin https://jdoe@wit.org/jdoe/donation-android-2015.git &lt;------- See Figure 2
</code></pre>

<p>Finally, push your repo to Bitbucket:</p>
<pre><code>
git push -u origin --all  

git push -u origin --tags  
</code></pre>

<p>You will be asked for your Bitbucket password.</p>
<p>Use the clone statement to complete the expression <em>git remote add origin</em> above. See Figure 2.</p>
<p><img alt="Figure 2" src="img/29.png"></p>
<p>On your PC cd to where you locate your repos and run the SSH clone command. You have already have installed ssh on your pc during the summer school.</p>
<ul>
<li>This will pull the latest commit of donation-android-2015.</li>
</ul>
  </div>
  <div  class="ui tab segment lab" data-tab="Exercises">
    <h1>Exercises</h1>
<p>Project so far:</p>
<ul>
<li>
<p><a href="archives/donation-android-2015.zip">donation-android-2015.zip</a></p>
</li>
<li>
<p>Also available to clone from GitHub:</p>
</li>
</ul>
<pre><code> git clone https://github.com/wit-computing/donation-android-2015.git
</code></pre>

<h2>Exercise 1</h2>
<p>Run the app and insert amounts of varying lengths (1, 222, 23, 2323). Note that the second column - payment method -may be displayed at different positions. If this happens, fix it.</p>
<p>Hint: each row is laid out by a row_donate.xml layout. The easiest way to fix this would be to experiment with they layout, and have the text fields aligned with the edges and not with eachother.</p>
<h2>Exercise 2</h2>
<p>When a donation is accepted, set the amount on screen to 0 (in both picker and text field).</p>
<h2>Exercise 3</h2>
<p>When you navigate from the Donate activity to reports, there will be no menu available. Bring in a menu, with two options 'Settings' and 'Donate' - Donate should bring you back to the donate screen.</p>
<h2>Exercise 4</h2>
<p>Introduce a new welcome screen - which should display a greeting + give the user 2 options (as simple buttons)</p>
<ul>
<li>Signup</li>
<li>Login</li>
</ul>
<p>When Login is pressed, the app should take you directly to the Donate activity (for the moment).</p>
<h2>Exercise 5</h2>
<p>Introduce a Signup Activity, which should present the user with:</p>
<ul>
<li>First Name</li>
<li>Last Name</li>
<li>Email</li>
<li>
<p>Password</p>
</li>
<li>
<p>a 'Register' button.</p>
</li>
</ul>
<p>Pressing Register should take you directly to "Donate" activity. Also, refactor the Welcome screen such that the 'signup' button takes you to this screen.</p>
<h2>Exercise 6:</h2>
<p>Introduce a Login activty, which should just look for</p>
<ul>
<li>email</li>
<li>
<p>password</p>
</li>
<li>
<p>a 'Login' button</p>
</li>
</ul>
<p>Pressing Login should take you directly to "Donate" activity.</p>
<h2>Exercise 7</h2>
<p>Bring in a new menu option - 'logout'. It should take you to the welcome screen, and should be available from the donate and report activities.</p>
<h2>Exercise 8</h2>
<p>Introduce a 'User' into the models package to represent the user in the usual way. Maintain a list of Users in the DonationApp object. Whenever anyone registers, then create a new User object in this list.</p>
<h2>Exercise 9</h2>
<p>Implement the Login activity, to now only let users in to Donate if they are registered (i.e. a matching email + password in the list of users maintained by DonationApp)</p>
  </div>
<script>
$('.ui.menu .item')
  .tab({
    history: true,
    historyType: 'hash'
  })
;
</script>
   </div>



  <br><br>
  <div class="ui bottom fixed borderless menu">
    <div class="ui small item">
    <p id="footertext">
    Prepared by  Eamonn de Leastar (edeleastar@tssg.wit.ie) & John Fitzgerald (johnjfitzgerald@outlook.com). Except where otherwise noted, this content is licensed under a
     <a  href="http://creativecommons.org/licenses/by-nc/4.0/" title="External link to http://creativecommons.org/licenses/by-nc/4.0/"
       target="_blank">Creative Commons Attribution-NonCommercial 4.0 License
     </a>
     </p>
    </div>
  </div>    <script>

$(document).ready(function()
{
  $("img").addClass ("ui image");

  var images = $(".lab img");
  jQuery.each(images, function(i)  {
    if((images[i].alt).length > 0)
    {
      var div_img = $(document.createElement("div")).addClass("ui segment");
      $(images[i]).wrap(div_img);
      var div_label = $(document.createElement("div")).addClass("ui ribbon teal top attached label");
      div_label.append(images[i].alt);
      $(div_label).insertBefore(images[i]);
    }
  });
})    </script>

  </body>
 </html>