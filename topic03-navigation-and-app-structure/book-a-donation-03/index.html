 <!DOCTYPE html>
 <html>
   <head>

     <link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>

     <meta charset="utf-8">
     <meta name="viewport" content="width=device-width, initial-scale=1">

     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.1.4/semantic.min.css" type="text/css">
     <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.2/styles/solarized_light.min.css" rel="stylesheet" />

     <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
     <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery.address/1.6/jquery.address.min.js"></script>
     <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.1.4/semantic.min.js"></script>
     <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.2/highlight.min.js"></script>
     <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.2/languages/java.min.js"></script>
     <script>hljs.initHighlightingOnLoad();</script>

      <style>


body 
{
  font-family: "Open Sans", "Helvetica", "Helvetica Neue",  "Arial", sans-serif;
}

figcaption
{
  margin-bottom: 20px;
}

.vertical-align
{
  display: flex;
  align-items: center;
}

.credits
{
  min-height:20px;
}
    </style>

  </head>

  <body>

  <div class="ui container">
<style>


code
{
  font-family: "Monaco";
  font-size: 110%;
}

img
{
  padding:1px;
  border:1px solid black;
}

h1
{
  font-style:italic;
  font-size:130%;
  border-bottom: thin solid black;
}
h2
{
  font-size:110%;
  border-bottom: thin solid black;
}
h3
{
  font-size:100%;
  border-bottom: thin solid black;
}

</style>

<div class="ui fixed top pointing inverted menu labmenu">
  <header class="header item">
    <a href="../index.html">
      <i class="sitemap icon"></i>
      3: Navigation & App Structure
    </a>
  </header>
  <div class="right tab-menu menu">
    <a class="active item" data-tab="Donation-03">
        Donation-03
    </a>
      <a class="item" data-tab="01">
        01
      </a>
      <a class="item" data-tab="02">
        02
      </a>
      <a class="item" data-tab="03">
        03
      </a>
      <a class="item" data-tab="04">
        04
      </a>
      <a class="item" data-tab="05">
        05
      </a>
      <a class="item" data-tab="06">
        06
      </a>
      <a class="item" data-tab="07">
        07
      </a>
      <a class="item" data-tab="08">
        08
      </a>
      <a class="item" data-tab="09">
        09
      </a>
      <a class="item" data-tab="10">
        10
      </a>
      <a class="item" data-tab="11">
        11
      </a>
      <a class="item" data-tab="Solution">
        Solution
      </a>
    </div>
</div>

<br><br>

  <div  class="ui tab segment lab" data-tab="Donation-03">
    <h1>Objectives</h1>
<p>We continue the implementation of Donation to including the welcome, sign up and login. Support these views with a User model, and validate the users on log in. Continue to build on your Donation repository.</p>
  </div>
  <div  class="ui tab segment lab" data-tab="01">
    <h1>Starting Point - Donation-02</h1>
<p>The best starting point for this lab is the completed lab from the `donation-02' lab available here:</p>
<ul>
<li><a href="https://github.com/wit-computing/donation-android-2015-02">https://github.com/wit-computing/donation-android-2015-02</a></li>
</ul>
<p>Even if you have completed the 'donation-02' lab - and proceeded to implement a range of the exercises, it might be simpler for this purpose of this lab here to start afresh. You can always re-integrate some of the techniques we cover here into your own project later.</p>
<p>So, on your workstation, locate a suitable folder and clone this repo:</p>
<pre><code>git clone https://github.com/wit-computing/donation-android-2015-02.git
</code></pre>

<p>Open the project in Android studio and make sure it runs correctly. If you are prompted to 'add git root' for the project, accept this option.</p>
<p>Before we start the lab proper, we will also clone a final version of this lab :</p>
<pre><code>git clone https://github.com/wit-computing/donation-android-2015-02.git
</code></pre>

<p>Open this one also, and make sure it runs correctly. Note that this version will require you to register and log in.</p>
<p>You should have two working android projects at this stage:</p>
<ul>
<li>donation-2015-02</li>
<li>donation-2015-03</li>
</ul>
<p>Your learning task in this lab is to transform the '02' project into the '03'.</p>
<p>Now switch back to the first one (donation-2015-02)  and proceed though the lab.</p>
<p>Also, before you start - look at this:</p>
<ul>
<li><a href="https://github.com/wit-computing/donation-android-2015-03/commits/master">https://github.com/wit-computing/donation-android-2015-03/commits/master</a></li>
</ul>
<p>These are each of the step - committed to the repo - you will be doing today.</p>
<p>These are the files in the starter project:</p>
<ul>
<li><a href="https://github.com/wit-computing/donation-android-2015-03/tree/89336ca11dc6495f0398fee3a333cca34d82dd2f">https://github.com/wit-computing/donation-android-2015-03/tree/89336ca11dc6495f0398fee3a333cca34d82dd2f</a></li>
</ul>
<p>Each step in the following will conclude with a link directly into the changes you have just made. This part of the lab will be at the end of the step, with the title <code>delta</code>. From that link you can look at just the changes made for that step.</p>
<h1>Exercise 1</h1>
<p>Run the app and insert amounts of varying lengths (1, 222, 23, 2323). Note that the second column - payment method -may be displayed at different positions. If this happens, fix it.</p>
<p>Hint: each row is laid out by a row_donate.xml layout. The easiest way to fix this would be to experiment with they layout, and have the text fields aligned with the edges and not with each other.</p>
<h1>Solution</h1>
<p>This is a revised version of the row_donate.xml file:</p>
<pre><code class="xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;match_parent&quot; &gt;

    &lt;TextView
        android:id=&quot;@+id/row_amount&quot;
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:layout_alignParentLeft=&quot;true&quot;
        android:layout_alignParentTop=&quot;true&quot;
        android:layout_marginLeft=&quot;48dp&quot;
        android:layout_marginTop=&quot;20dp&quot;
        android:text=&quot;@string/defaultAmount&quot; /&gt;

    &lt;TextView
        android:id=&quot;@+id/row_method&quot;
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:layout_alignBaseline=&quot;@+id/row_amount&quot;
        android:layout_alignBottom=&quot;@+id/row_amount&quot;
        android:layout_alignParentRight=&quot;true&quot;
        android:layout_marginRight=&quot;79dp&quot;
        android:text=&quot;@string/defaultMethod&quot; /&gt;

&lt;/RelativeLayout&gt;
</code></pre>

<h2>delta</h2>
<ul>
<li><a href="https://github.com/wit-computing/donation-android-2015-03/commit/30cf7214c33b8138cf250cdfca8a302813c9b720">Exercise-02</a></li>
</ul>
  </div>
  <div  class="ui tab segment lab" data-tab="02">
    <h1>Exercise 2</h1>
<p>When a donation is accepted, set the amount on screen to 0 (in both picker and text field).</p>
<h1>Solution</h1>
<p>Add these two lines at the end of Donate.donateButtonPressed()</p>
<pre><code class="java">    amountText.setText(&quot;&quot;);
    amountPicker.setValue(0);
</code></pre>

<h2>delta</h2>
<ul>
<li><a href="https://github.com/wit-computing/donation-android-2015-03/commit/9deccddb9848eb8dbc6a0b39cc74008734535594">Exercise-02</a></li>
</ul>
  </div>
  <div  class="ui tab segment lab" data-tab="03">
    <h1>Exercise 3</h1>
<p>When you navigate from the Donate activity to reports, there will be no menu available. Bring in a menu, with two options 'Settings' and 'Donate' - Donate should bring you back to the donate screen.</p>
<h1>Solution</h1>
<p>Introduce a new string constant into strings.xml:</p>
<pre><code class="xml">    &lt;string name=&quot;menuDonate&quot;&gt;Donate&lt;/string&gt;
</code></pre>

<p>Then a new menu - menu_report.xml - in the correct res folder:</p>
<pre><code class="xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;menu xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; &gt;

    &lt;item android:id=&quot;@+id/action_settings&quot;
        android:title=&quot;@string/action_settings&quot;
        android:orderInCategory=&quot;100&quot;/&gt;
    &lt;item
        android:id=&quot;@+id/menuDonate&quot;
        android:orderInCategory=&quot;100&quot;
        android:title=&quot;@string/menuDonate&quot;/&gt;

&lt;/menu&gt;
</code></pre>

<p>The report activity will then require the following two methods.</p>
<ul>
<li><strong>Warning:</strong> When introducing these methods into Report.java ensure you locate them within the Report class, not within the DonationAdapter class that you may have chosen to locate in the same compilation unit (the file Report.java).</li>
</ul>
<pre><code class="java">  @Override
  public boolean onCreateOptionsMenu(Menu menu)
  {
    getMenuInflater().inflate(R.menu.menu_report, menu);
    return true;
  }

  @Override
  public boolean onOptionsItemSelected(MenuItem item)
  {
    switch (item.getItemId())
    {
      case R.id.menuDonate : startActivity (new Intent(this, Donate.class));
        break;
    }
    return true;
  }
</code></pre>

<p>These imports are required:</p>
<pre><code>import android.content.Intent;
import android.view.MenuItem;
import android.view.Menu;
</code></pre>

<p>If you try the above, you will note that the menu may no appear at all. This is because we have initially set up the project to target an early version of android, which doest no support the menu bar along the top.</p>
<p>However, we have included the <code>AppConpat</code> library, which implements a 'backport' of the menu bar to older editions. In order to enable this, we need to change the Report activity class. Currently is it structured like this:</p>
<pre><code>public class Report extends Activity
{
</code></pre>

<p>i.e. it is derived from the base class <code>Activity</code>. We need to have it derived from <code>AppCompatActivity</code>:</p>
<pre><code>public class Report extends AppCompatActivity
{
</code></pre>

<p>This will require the following import:</p>
<pre><code>import android.support.v7.app.AppCompatActivity;
</code></pre>

<h2>delta</h2>
<ul>
<li><a href="https://github.com/wit-computing/donation-android-2015-03/commit/37d4e19afb1569a340ceabdf8ceb46fcb15f6ddc">Exercise-03</a></li>
</ul>
  </div>
  <div  class="ui tab segment lab" data-tab="04">
    <h1>Exercise 4: Welcome</h1>
<p>Introduce a new welcome screen - which should display a greeting + give the user 2 options (as simple buttons)</p>
<ul>
<li>Signup</li>
<li>Login</li>
</ul>
<p>When Login is pressed, the app should take you directly to the Donate activity (for the moment).</p>
<h1>Solution</h1>
<p>This is the new layout:</p>
<p>Filename: activity_welcome.xml</p>
<pre><code class="xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    android:id=&quot;@+id/RelativeLayout&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;match_parent&quot;
    android:orientation=&quot;vertical&quot; &gt;

    &lt;Button
        android:id=&quot;@+id/welcomeLogin&quot;
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:layout_alignParentTop=&quot;true&quot;
        android:layout_centerHorizontal=&quot;true&quot;
        android:layout_marginTop=&quot;102dp&quot;
        android:text=&quot;@string/welcomeLogin&quot; /&gt;

    &lt;Button
        android:id=&quot;@+id/welcomeSignup&quot;
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:layout_centerHorizontal=&quot;true&quot;
        android:layout_centerVertical=&quot;true&quot;
        android:text=&quot;@string/welcomeSignup&quot; /&gt;

&lt;/RelativeLayout&gt;
</code></pre>

<p>It requires these two strings in strings.xml:</p>
<pre><code class="xml">    &lt;string name=&quot;welcomeLogin&quot;&gt;Login&lt;/string&gt;
    &lt;string name=&quot;welcomeSignup&quot;&gt;Sign up&lt;/string&gt;
</code></pre>

<p>Here is a minimal version of the activity:</p>
<pre><code class="java">package app.donation;

import app.donation.R;
import android.app.Activity;
import android.os.Bundle;
import android.support.v7.app.AppCompatActivity;

public class Welcome extends AppCompatActivity
{
  @Override
  public void onCreate(Bundle savedInstanceState)
  {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_welcome);
  }
}
</code></pre>

<p>(We continue to use AppCompatActivity)</p>
<p>We would like this to be the first activity to appear when the app is launched. This is configured in AndroidManifest.xml.</p>
<ul>
<li>Here is the existing manifest file:</li>
</ul>
<pre><code class="xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    package=&quot;app.donation&quot;&gt;

    &lt;application
        android:allowBackup=&quot;true&quot;
        android:icon=&quot;@mipmap/ic_launcher&quot;
        android:label=&quot;@string/app_name&quot;
        android:theme=&quot;@style/AppTheme&quot;
        android:name=&quot;app.donation.DonationApp&quot;&gt;
        &lt;activity
            android:name=&quot;app.donation.Donate&quot;
            android:label=&quot;@string/app_name&quot; &gt;
            &lt;intent-filter&gt;
                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;
                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;
            &lt;/intent-filter&gt;
        &lt;/activity&gt;
        &lt;activity
            android:name=&quot;app.donation.Report&quot;
            android:label=&quot;@string/donateTitle&quot; &gt;
        &lt;/activity&gt;
    &lt;/application&gt;

&lt;/manifest&gt;

</code></pre>

<p>In the above, you can see that "Donate" is the MAIN activity, and we have no entry for Welcome yet. Here is a revision to do what we want:</p>
<pre><code class="xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    package=&quot;app.donation&quot;&gt;

    &lt;application
        android:allowBackup=&quot;true&quot;
        android:icon=&quot;@mipmap/ic_launcher&quot;
        android:label=&quot;@string/app_name&quot;
        android:theme=&quot;@style/AppTheme&quot;
        android:name=&quot;app.donation.DonationApp&quot;&gt;
        &lt;activity
            android:name=&quot;app.donation.Welcome&quot;
            android:label=&quot;@string/app_name&quot; &gt;
            &lt;intent-filter&gt;
                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;
                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;
            &lt;/intent-filter&gt;
        &lt;/activity&gt;
        &lt;activity
            android:name=&quot;app.donation.Donate&quot;
            android:label=&quot;@string/app_name&quot; &gt;
        &lt;/activity&gt;
        &lt;activity
            android:name=&quot;app.donation.Report&quot;
            android:label=&quot;@string/donateTitle&quot; &gt;
        &lt;/activity&gt;
    &lt;/application&gt;

&lt;/manifest&gt;

</code></pre>

<p>We have three activities - with Welcome denoted as the Main via these attributes:</p>
<pre><code class="xml">           &lt;intent-filter&gt;
                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;
                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;
            &lt;/intent-filter&gt;
</code></pre>

<p>Notice that we have 'donateTitle' as the Label for the Report activity. It is currently set to:</p>
<pre><code class="xml">            android:label=&quot;@string/donateTitle&quot; &gt;
</code></pre>

<p>Perhaps we should change this now to:</p>
<pre><code class="xml">            android:label=&quot;@string/app_name&quot; &gt;
</code></pre>

<p>It may make sense to have a different label for each activity as you evolve the app.</p>
<p>Finally, we need an event handler for the Login button. </p>
<ul>
<li>Edit activity_welcome and introduce a new field for the login button</li>
</ul>
<pre><code>    android:onClick=&quot;loginPressed&quot;
</code></pre>

<pre><code class="xml">    &lt;Button
        android:id=&quot;@+id/welcomeLogin&quot;
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:layout_alignParentTop=&quot;true&quot;
        android:layout_centerHorizontal=&quot;true&quot;
        android:layout_marginTop=&quot;102dp&quot;
        android:onClick=&quot;loginPressed&quot;
        android:text=&quot;@string/welcomeLogin&quot; /&gt;
</code></pre>

<p>You will notice that the editor may recognize that you do not have any method called <code>loginPressed</code> in the Welcome class yet.</p>
<p>Bring in the method into Welcome activity now:</p>
<pre><code class="java">  public void loginPressed (View view) 
  {
    Toast toast = Toast.makeText(this, &quot;Login Pressed!&quot;, Toast.LENGTH_SHORT);
    toast.show();
  }
</code></pre>

<p>These import statements are necessary:</p>
<pre><code>import android.view.View;
import android.widget.Toast;
</code></pre>

<p>Test all of this now and make sure the toast message appears.</p>
<p>Finally, replace the loginPressed method implementation with the code to actually start the donate activity:</p>
<pre><code class="java">   startActivity (new Intent(this, Donate.class));
</code></pre>

<p>Import the Intent class and delete the import for Toast which is no longer needed here:</p>
<pre><code>import android.content.Intent;
</code></pre>

<p>Launch the app again, press Login: the Donation view should open.</p>
<p>This completes exercise 4.</p>
<h2>delta</h2>
<ul>
<li><a href="https://github.com/wit-computing/donation-android-2015-03/commit/75cef1b50feb75278100f8df70f052cd2361ecc1">Exercise-04</a></li>
</ul>
  </div>
  <div  class="ui tab segment lab" data-tab="05">
    <h1>Exercise 5 - Part 1 Signup Layout</h1>
<p>Introduce a Signup Activity, which should present the user with:</p>
<ul>
<li>First Name</li>
<li>Last Name</li>
<li>Email</li>
<li>
<p>Password</p>
</li>
<li>
<p>a 'Register' button.</p>
</li>
</ul>
<p>Pressing Register should take you directly to "Donate" activity.</p>
<p>Also, refactor the Welcome screen such that the 'Sign up' button takes you to this, the sign up, screen.</p>
<h1>Solution</h1>
<p>In the Exercise 4 we created and activity by separately creating layout and a class, and building each from scratch. This time we will use the create activity wizard. In doing so, keep a close eye the files the wizard generates or modifies.</p>
<p>Select the app.activities package, and select "File-&gt;New-&gt;Other" ... and follow the following entries:</p>
<p><img alt="Figure 1: Select activities folder &amp; from context menu activate activity creation wizard" src="img/00.png">
<img alt="Figure 2: Customize activity (note we change Menu Resource Name)" src="img/01.png">
<img alt="Figure 3: Combined Design-Text view of new file activity_signup.xml" src="img/02.png">
<img alt="Figure 4: Text view of new file activity_signup.xml" src="img/03.png">
<img alt="Figure 5: Default Design view" src="img/03a.png"></p>
<p>Inspect each of the files altered or added to by the wizard:</p>
<ul>
<li>AndroidManifest.xml</li>
<li>strings.xml</li>
<li>activity_signup.xml</li>
<li>menu_signip.xml</li>
<li>Signup.java</li>
</ul>
<p>Open the layout designer, and design a screen (<em>activity_signup.xml</em>) to look like this:</p>
<p><img alt="Figure 7: Signup screen" src="img/04.png"></p>
<p>In particular, that we do not have a 'label' for first name (like we would have in a web app), but rather set a 'Hint'. This can be set in the Properties window as shown in Figure 8.  </p>
<p><img alt="Figure 8: Using a hint or placeholder instead of a label" src="img/05.png"></p>
<p>When placing the text field on the canvas, select "Person Name" from the 'Text Widgets' palette</p>
<p>This is the layout so far:</p>
<pre><code class="xml">&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    xmlns:tools=&quot;http://schemas.android.com/tools&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;match_parent&quot;
    android:paddingBottom=&quot;@dimen/activity_vertical_margin&quot;
    android:paddingLeft=&quot;@dimen/activity_horizontal_margin&quot;
    android:paddingRight=&quot;@dimen/activity_horizontal_margin&quot;
    android:paddingTop=&quot;@dimen/activity_vertical_margin&quot;
    tools:context=&quot;.Signup&quot; &gt;

    &lt;TextView
        android:id=&quot;@+id/signupTitle&quot;
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:layout_alignParentLeft=&quot;true&quot;
        android:layout_alignParentTop=&quot;true&quot;
        android:layout_marginLeft=&quot;32dp&quot;
        android:layout_marginTop=&quot;28dp&quot;
        android:text=&quot;@string/signupTitle&quot;
        android:textAppearance=&quot;?android:attr/textAppearanceMedium&quot; /&gt;

    &lt;TextView
        android:id=&quot;@+id/signupSubtitle&quot;
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:layout_alignLeft=&quot;@+id/signupTitle&quot;
        android:layout_below=&quot;@+id/signupTitle&quot;
        android:layout_marginLeft=&quot;55dp&quot;
        android:layout_marginTop=&quot;30dp&quot;
        android:text=&quot;@string/signupSubtitle&quot;
        android:textAppearance=&quot;?android:attr/textAppearanceSmall&quot; /&gt;

    &lt;EditText
        android:id=&quot;@+id/firstName&quot;
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:layout_alignParentLeft=&quot;true&quot;
        android:layout_alignParentRight=&quot;true&quot;
        android:layout_below=&quot;@+id/signupSubtitle&quot;
        android:layout_marginTop=&quot;40dp&quot;
        android:ems=&quot;10&quot;
        android:hint=&quot;@string/signupFirstname&quot;
        android:inputType=&quot;textPersonName&quot; /&gt;

&lt;/RelativeLayout&gt;
</code></pre>

<p>and strings.xml has these supporting definitions:</p>
<pre><code class="xml">    &lt;string name=&quot;title_activity_signup&quot;&gt;Signup&lt;/string&gt;
    &lt;string name=&quot;signupTitle&quot;&gt;Sign up for the Donation App&lt;/string&gt;
    &lt;string name=&quot;signupSubtitle&quot;&gt;Enter details below&lt;/string&gt;
    &lt;string name=&quot;signupFirstname&quot;&gt;First name&lt;/string&gt;
</code></pre>

<p>Observe that we have removed the wizard-generated 'hello_world' resource from <em>strings.xml</em>.</p>
<p>Complete the layout now, select "Person Name", "Email" and "Password" from the text widgets pallette:</p>
<p><img alt="Figure 9d: Completing Signup screen" src="img/06.png"></p>
<p>The email and password ids are exceptionally "Email" and "Password" (leading upper case letter). This is to avoid conflict with built in ids.</p>
<p>Set the 'Hints' as you go, and fix up the strings as we have been doing. This is the final version of the layout:</p>
<pre><code class="xml">&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    xmlns:tools=&quot;http://schemas.android.com/tools&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;match_parent&quot;
    android:paddingBottom=&quot;@dimen/activity_vertical_margin&quot;
    android:paddingLeft=&quot;@dimen/activity_horizontal_margin&quot;
    android:paddingRight=&quot;@dimen/activity_horizontal_margin&quot;
    android:paddingTop=&quot;@dimen/activity_vertical_margin&quot;
    tools:context=&quot;.Signup&quot; &gt;

    &lt;TextView
        android:id=&quot;@+id/signupTitle&quot;
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:layout_alignParentLeft=&quot;true&quot;
        android:layout_alignParentTop=&quot;true&quot;
        android:layout_marginLeft=&quot;32dp&quot;
        android:layout_marginTop=&quot;28dp&quot;
        android:text=&quot;@string/signupTitle&quot;
        android:textAppearance=&quot;?android:attr/textAppearanceMedium&quot; /&gt;

    &lt;TextView
        android:id=&quot;@+id/signupSubtitle&quot;
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:layout_alignLeft=&quot;@+id/signupTitle&quot;
        android:layout_below=&quot;@+id/signupTitle&quot;
        android:layout_marginLeft=&quot;55dp&quot;
        android:layout_marginTop=&quot;30dp&quot;
        android:text=&quot;@string/signupSubtitle&quot;
        android:textAppearance=&quot;?android:attr/textAppearanceSmall&quot; /&gt;

    &lt;EditText
        android:id=&quot;@+id/firstName&quot;
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:layout_alignParentLeft=&quot;true&quot;
        android:layout_alignParentRight=&quot;true&quot;
        android:layout_below=&quot;@+id/signupSubtitle&quot;
        android:layout_marginTop=&quot;40dp&quot;
        android:ems=&quot;10&quot;
        android:hint=&quot;@string/signupFirstname&quot;
        android:inputType=&quot;textPersonName&quot;/&gt;

        &lt;requestFocus /&gt;

    &lt;EditText
        android:id=&quot;@+id/lastName&quot;
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:layout_alignLeft=&quot;@+id/firstName&quot;
        android:layout_alignParentRight=&quot;true&quot;
        android:layout_below=&quot;@+id/firstName&quot;
        android:ems=&quot;10&quot;
        android:hint=&quot;@string/signupLastName&quot;
        android:inputType=&quot;textPersonName&quot; &gt;

    &lt;/EditText&gt;

    &lt;EditText
        android:id=&quot;@+id/Email&quot;
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:layout_alignLeft=&quot;@+id/lastName&quot;
        android:layout_alignParentRight=&quot;true&quot;
        android:layout_below=&quot;@+id/lastName&quot;
        android:ems=&quot;10&quot;
        android:hint=&quot;@string/signupEmail&quot;
        android:inputType=&quot;textEmailAddress&quot; /&gt;

    &lt;EditText
        android:id=&quot;@+id/Password&quot;
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:layout_alignLeft=&quot;@+id/Email&quot;
        android:layout_alignParentRight=&quot;true&quot;
        android:layout_below=&quot;@+id/Email&quot;
        android:ems=&quot;10&quot;
        android:hint=&quot;@string/signupPassword&quot;
        android:inputType=&quot;textPassword&quot; /&gt;

    &lt;Button
        android:id=&quot;@+id/register&quot;
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:layout_alignParentBottom=&quot;true&quot;
        android:layout_centerHorizontal=&quot;true&quot;
        android:layout_marginBottom=&quot;28dp&quot;
        android:text=&quot;@string/signupRegister&quot; /&gt;

&lt;/RelativeLayout&gt;
</code></pre>

<p>and the supporting Strings:</p>
<ul>
<li>Note: do not duplicate string resources.</li>
</ul>
<pre><code class="xml">    ...
    &lt;string name=&quot;signupTitle&quot;&gt;Sign up for the Donation App&lt;/string&gt;
    &lt;string name=&quot;signupSubtitle&quot;&gt;Enter details below&lt;/string&gt;
    &lt;string name=&quot;signupFirstname&quot;&gt;First name&lt;/string&gt;
    &lt;string name=&quot;signupLastName&quot;&gt;Last Name&lt;/string&gt;
    &lt;string name=&quot;signupEmail&quot;&gt;Email&lt;/string&gt;
    &lt;string name=&quot;signupPassword&quot;&gt;Password&lt;/string&gt;
    &lt;string name=&quot;signupRegister&quot;&gt;Register&lt;/string&gt;
</code></pre>
  </div>
  <div  class="ui tab segment lab" data-tab="06">
    <h1>Exercise 5 - Part 2 Signup Activity Class</h1>
<p>(continued)</p>
<p>Pressing Register should take you directly to "Donate" activity. Also, refactor the Welcome screen such that the 'signup' button takes you to this screen (the Donate activity).</p>
<h1>Solution</h1>
<p>The previous step generated this Activity class:</p>
<pre><code class="java">package app.activities;

import android.support.v7.app.AppCompatActivity;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuItem;

import app.donation.R;

public class Signup extends AppCompatActivity

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_signup);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.signup, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        // Handle action bar item clicks here. The action bar will
        // automatically handle clicks on the Home/Up button, so long
        // as you specify a parent activity in AndroidManifest.xml.
        int id = item.getItemId();

        //noinspection SimplifiableIfStatement
        if (id == R.id.action_settings) {
            return true;
        }

        return super.onOptionsItemSelected(item);
    }
}
</code></pre>

<p>We are not going to support a menu in this class - so we will delete the onCreateOptionsMenu and onOptionsItemSelected methods now. </p>
<p>Similarly, we can delete the generate menu - menu_signup.xml - in the menu folder.</p>
<p>Now we can set our event handler in the activity_signup.xml layout:</p>
<pre><code class="xml">    &lt;Button
        android:id=&quot;@+id/signup&quot;
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:layout_alignParentBottom=&quot;true&quot;
        android:layout_centerHorizontal=&quot;true&quot;
        android:layout_marginBottom=&quot;28dp&quot;
        android:onClick=&quot;registerPressed&quot;
        android:text=&quot;@string/signupRegister&quot; /&gt;
</code></pre>

<p>and implement the event handler:</p>
<pre><code>  public void registerPressed (View view) 
  {
    startActivity (new Intent(this, Donate.class));
  }
</code></pre>

<p>Finally (!) - we need to wire up the 'Signup' button from the welcome screen to take us to the signup activity.</p>
<p>Open the welcome layout, and introduce the click handler:</p>
<pre><code class="xml">    &lt;Button
        android:id=&quot;@+id/welcomeSignup&quot;
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:layout_centerHorizontal=&quot;true&quot;
        android:layout_centerVertical=&quot;true&quot;
        android:onClick=&quot;signupPressed&quot;
        android:text=&quot;@string/welcomeSignup&quot; /&gt;
</code></pre>

<p>Then, in Welcome activity - implement the handler:</p>
<pre><code class="java">  public void signupPressed (View view) 
  {
    startActivity (new Intent(this, Signup.class));
  }
</code></pre>

<p>Run the app now, and verify that the navigation operates as expected. Also, try the 'back' button, and the menu button. Try various combination of these to see how it operates.</p>
<h2>delta</h2>
<ul>
<li><a href="https://github.com/wit-computing/donation-android-2015-03/commit/30139f4f9e9f46cbb7ea5dbf6a7054deb2c872f1">Exercise-05</a></li>
</ul>
  </div>
  <div  class="ui tab segment lab" data-tab="07">
    <h1>Exercise 6: : Login</h1>
<p>Introduce a Login activty, which should just look for</p>
<ul>
<li>email</li>
<li>
<p>password</p>
</li>
<li>
<p>a 'Login' button</p>
</li>
</ul>
<p>Pressing Login should take you directly to "Donate" activity.</p>
<h1>Solution</h1>
<p>Create  new activity using the 'Wizard' - called "Login". Do not select "Login" form the wizard, keep the activity 'Blank'. Ensure you select <em>java/app/donation</em> in the Android Tools Window before activating the wizard to ensure the new class is correctly located:</p>
<p><img alt="Figure 1: Correctly locate new Login class" src="img/10.png"></p>
<p>Also, ensure that Login is correctly referenced in the manifest file as follows:</p>
<pre><code>        &lt;activity
            android:name=&quot;.Login&quot;
            android:label=&quot;@string/title_activity_login&quot; &gt;
        &lt;/activity&gt;
</code></pre>

<p>Edit the layout, and design a screen to look like that shown in Figure 3 below.</p>
<p><img alt="Figure 3: Login screen" src="img/07.png"></p>
<p>This is the layout that may be generated:</p>
<pre><code class="xml">&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    xmlns:tools=&quot;http://schemas.android.com/tools&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;match_parent&quot;
    android:paddingBottom=&quot;@dimen/activity_vertical_margin&quot;
    android:paddingLeft=&quot;@dimen/activity_horizontal_margin&quot;
    android:paddingRight=&quot;@dimen/activity_horizontal_margin&quot;
    android:paddingTop=&quot;@dimen/activity_vertical_margin&quot;
    tools:context=&quot;.Login&quot; &gt;

    &lt;TextView
        android:id=&quot;@+id/loginTitle&quot;
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:layout_alignParentLeft=&quot;true&quot;
        android:layout_alignParentRight=&quot;true&quot;
        android:layout_alignParentTop=&quot;true&quot;
        android:layout_marginTop=&quot;18dp&quot;
        android:text=&quot;@string/loginTitle&quot;
        android:textAppearance=&quot;?android:attr/textAppearanceMedium&quot; /&gt;

    &lt;TextView
        android:id=&quot;@+id/loginSubtitle&quot;
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:layout_alignLeft=&quot;@+id/loginTitle&quot;
        android:layout_alignParentRight=&quot;true&quot;
        android:layout_below=&quot;@+id/loginTitle&quot;
        android:text=&quot;@string/loginSubtitle&quot;
        android:textAppearance=&quot;?android:attr/textAppearanceSmall&quot; /&gt;

    &lt;EditText
        android:id=&quot;@+id/loginEmail&quot;
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:layout_alignLeft=&quot;@+id/loginSubtitle&quot;
        android:layout_alignRight=&quot;@+id/loginSubtitle&quot;
        android:layout_below=&quot;@+id/loginSubtitle&quot;
        android:layout_marginTop=&quot;17dp&quot;
        android:ems=&quot;10&quot;
        android:hint=&quot;@string/loginEmail&quot;
        android:inputType=&quot;textEmailAddress&quot; &gt;

        &lt;requestFocus /&gt;
    &lt;/EditText&gt;

    &lt;EditText
        android:id=&quot;@+id/loginPassword&quot;
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:layout_alignLeft=&quot;@+id/loginEmail&quot;
        android:layout_alignRight=&quot;@+id/loginEmail&quot;
        android:layout_below=&quot;@+id/loginEmail&quot;
        android:ems=&quot;10&quot;
        android:hint=&quot;@string/loginPassword&quot;
        android:inputType=&quot;textPassword&quot; /&gt;

    &lt;Button
        android:id=&quot;@+id/login&quot;
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:layout_centerHorizontal=&quot;true&quot;
        android:layout_centerVertical=&quot;true&quot;
        android:text=&quot;@string/loginSignin&quot; /&gt;

&lt;/RelativeLayout&gt;
</code></pre>

<p>Add the supporting strings, removing <em>Hello World</em> default string:</p>
<pre><code>    &lt;string name=&quot;title_activity_login&quot;&gt;Login&lt;/string&gt;
    &lt;string name=&quot;loginTitle&quot;&gt;Login to Donation&lt;/string&gt;
    &lt;string name=&quot;loginSubtitle&quot;&gt;You must be registered&lt;/string&gt;
    &lt;string name=&quot;loginSignin&quot;&gt;Sign in&lt;/string&gt;
    &lt;string name=&quot;loginEmail&quot;&gt;Email&lt;/string&gt;
    &lt;string name=&quot;loginPassword&quot;&gt;Password&lt;/string&gt;
</code></pre>

<p>There is how we would like the class to be implemented:</p>
<pre><code class="java">package app.donation;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import app.donation.R;

public class Login extends Activity
{
  @Override
  protected void onCreate(Bundle savedInstanceState)
  {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_login);
  }

  public void signinPressed (View view) 
  {
    startActivity (new Intent(this, Donate.class));
  }
}
</code></pre>

<p>Locate the button resource in the activity_login.xml resource:</p>
<pre><code class="xml">    &lt;Button
        android:id=&quot;@+id/login&quot;
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:layout_centerHorizontal=&quot;true&quot;
        android:layout_centerVertical=&quot;true&quot;
        android:onClick=&quot;signinPressed&quot;
        android:text=&quot;@string/loginSignin&quot; /&gt;
</code></pre>

<p>.. and introduce the onClick handler (shown above).</p>
<p>Now, redirect the welcome screen to take the user to this screen when 'Login' is pressed. Open Welcome.java:</p>
<pre><code>  public void loginPressed (View view) 
  {
    startActivity (new Intent(this, Login.class));
  }
</code></pre>

<p>And redirect the Signup screen to the Welcome screen once the Register button is pressed:</p>
<pre><code>  public void registerPressed (View view)
  {
    startActivity (new Intent(this, Welcome.class));
  }
</code></pre>

<p>The navigation is a little tricky to get right - so verify that you can launch and follow from one screen to the next.</p>
<h2>delta</h2>
<ul>
<li><a href="https://github.com/wit-computing/donation-android-2015-03/commit/e8885a5c37676f3e4328537083c28596e50b7a10">Exercise-06</a></li>
</ul>
  </div>
  <div  class="ui tab segment lab" data-tab="08">
    <h1>Exercise 7</h1>
<p>Bring in a new menu option - 'logout'. It should take you to the welcome screen, and should be available from the donate and report activities.</p>
<h1>Solution</h1>
<p>Introduce a new string resource for the menu item in strings.xml:</p>
<pre><code class="xml">    &lt;string name=&quot;menuLogout&quot;&gt;Logout&lt;/string&gt;    
</code></pre>

<p>In both <code>menu_donate.xml</code> and <code>menu_report.xml</code> (the menus), bring in a new option:</p>
<pre><code class="xml">      &lt;item
        android:id=&quot;@+id/menuLogout&quot;
        android:orderInCategory=&quot;100&quot;
        android:title=&quot;@string/menuLogout&quot;/&gt;  
</code></pre>

<p>Run the app now, and verify that these options appear.</p>
<p>Then we need to implement the control flow. In the donate activity class:</p>
<pre><code class="java">  @Override
  public boolean onOptionsItemSelected(MenuItem item)
  {
    switch (item.getItemId())
    {
      case R.id.menuReport : startActivity (new Intent(this, Report.class));
                             break;
      case R.id.menuLogout : startActivity (new Intent(this, Welcome.class));
                             break;                             
    }
    return true;
  }
</code></pre>

<p>and Report:</p>
<pre><code class="java">  @Override
  public boolean onOptionsItemSelected(MenuItem item)
  {
    switch (item.getItemId())
    {
      case R.id.menuDonate : startActivity (new Intent(this, Donate.class));
                             break;
      case R.id.menuLogout : startActivity (new Intent(this, Welcome.class));
                             break;                               
    }
    return true;
  }  
</code></pre>

<p>Test this now.</p>
<h2>delta</h2>
<ul>
<li><a href="https://github.com/wit-computing/donation-android-2015-03/commit/a4071dc3663508f08fd1472838cd1ee62a036ed8">Exercise-07</a></li>
</ul>
  </div>
  <div  class="ui tab segment lab" data-tab="09">
    <h1>Exercise 8</h1>
<p>Introduce a 'User' into the models package to represent the user in the usual way. Maintain a list of Users in the DonationApp object. Whenever anyone registers, then create a new User object in this list.</p>
<h1>Solution</h1>
<p>Bring in this new class the project</p>
<pre><code class="java">package app.donation;

public class User 
{
  public String firstName;
  public String lastName;
  public String email;
  public String password;

  public User(String firstName, String lastName, String email, String password)
  {
    this.firstName = firstName;
    this.lastName = lastName;
    this.email = email;
    this.password = password;
  } 
}
</code></pre>

<p>In DonationApp class, incorporate a new collection of Users as a member of the class:</p>
<pre><code class="java">  public List &lt;User&gt;      users       = new ArrayList&lt;User&gt;();  
</code></pre>

<p>.. and a new method to add a user to this collection:</p>
<pre><code class="java">  public void newUser(User user)
  {
    users.add(user);
  }
</code></pre>

<p>Now in the Signup activity - we can retrieve the fields from the widgets, create a new User object and store it in the DonationApp object:</p>
<pre><code class="java">  public void registerPressed (View view) 
  {
    TextView firstName = (TextView)  findViewById(R.id.firstName);
    TextView lastName  = (TextView)  findViewById(R.id.lastName);
    TextView email     = (TextView)  findViewById(R.id.Email);
    TextView password  = (TextView)  findViewById(R.id.Password);

    User user = new User (firstName.getText().toString(), lastName.getText().toString(), email.getText().toString(), password.getText().toString());

    DonationApp app = (DonationApp) getApplication();
    app.newUser(user);

    startActivity (new Intent(this, Welcome.class));
  }
}
</code></pre>

<p>Test this now.</p>
<h2>delta</h2>
<ul>
<li><a href="https://github.com/wit-computing/donation-android-2015-03/commit/b46d89dd8947081b1e16caa80dd717a5f289240a">Exercise-08</a></li>
</ul>
<p>(this commit has been miss titled exercise 09)</p>
  </div>
  <div  class="ui tab segment lab" data-tab="10">
    <h1>Exercise 9</h1>
<p>Implement the Login activity so that users are permitted to Donate only if they are registered (i.e. a matching email + password exists in the list of users maintained by DonationApp)</p>
<h1>Solution</h1>
<p>Here is a new method for DonationApp that will validate users :</p>
<pre><code class="java">  public boolean validUser (String email, String password)
  {
    for (User user : users)
    {
      if (user.email.equals(email) &amp;&amp; user.password.equals(password))
      {
        return true;
      }
    }
    return false;
  }
</code></pre>

<p>Then we can check in Login activity that the entered details match a user:</p>
<pre><code class="java">  public void signinPressed (View view) 
  {
    DonationApp app = (DonationApp) getApplication();

    TextView email     = (TextView)  findViewById(R.id.loginEmail);
    TextView password  = (TextView)  findViewById(R.id.loginPassword);

    if (app.validUser(email.getText().toString(), password.getText().toString()))
    {
      startActivity (new Intent(this, Donate.class));
    }
    else
    {
      Toast toast = Toast.makeText(this, &quot;Invalid Credentials&quot;, Toast.LENGTH_SHORT);
      toast.show();
    }
  }
</code></pre>

<p>Run this now - and you should be able to only log in if the user has been registered correctly.</p>
<h2>delta</h2>
<ul>
<li><a href="https://github.com/wit-computing/donation-android-2015-03/commit/39ecb6b49bfdea9be3607adfc340dd3f4e0f6e6e">Exercise-09</a></li>
</ul>
<p>(this commit has been miss titled exercise 10)</p>
  </div>
  <div  class="ui tab segment lab" data-tab="11">
    <h1>Refactor Package Structure</h1>
<p>Currently our project package structure looks like this:</p>
<p><img alt="" src="img/11.png"></p>
<p>This is a reasonable number of classes in the <code>app.donation</code> package, but we might consider it a bit cluttered. </p>
<p>Here is a refactoring into three packages - this was achieved by:</p>
<h2>1. Selecting <code>activity</code> and creating three new packages inside it as shown here:</h2>
<p><img alt="" src="img/12.png"></p>
<h2>2. Drag and drop the classes into the appropriate packages</h2>
<p><img alt="" src="img/13.png"></p>
<p>Proceed with caution!</p>
<p>If drag and drop seems to be unavailable - exit and restart Android Studio, as the refactoring options may be temporarily disabled.</p>
<p>Drag/drop/refactor will make sure all the imports are correctly inserted - including changing AndroidManifest.xml, however you may need to allow time for the refactoring to 'catch up' (it is making significant changes) before you press on to the next one.</p>
<p>This represents a cleaner structure, and a better foundation should we introduce more models and activities.</p>
<h2>delta</h2>
<ul>
<li><a href="https://github.com/wit-computing/donation-android-2015-03/commit/c4fe5ab18a12431b265402952ec3fa3d0c99a2bf">Final</a></li>
</ul>
  </div>
  <div  class="ui tab segment lab" data-tab="Solution">
    <h1>Solution</h1>
<p>Project so far:</p>
<ul>
<li><a href="https://github.com/wit-computing/donation-android-2015-03">https://github.com/wit-computing/donation-android-2015-03</a></li>
</ul>
<p>The commits step by step:</p>
<ul>
<li><a href="https://github.com/wit-computing/donation-android-2015-03/commits/master">https://github.com/wit-computing/donation-android-2015-03/commits/master</a></li>
</ul>
<p>If you have been checking in this lab as you go along, you may cant to save your work to github or bitbucket at this stage.</p>
<p>The simplest way of doing this is to first 'uncouple' the project from its current repo:</p>
<pre><code>git remote rm origin
</code></pre>

<p>Note that this does not eliminate the commit history - it is all preserved intact locally. Now create a repo on one of the above services.</p>
<p>Once it is created, we associate this remote 'origin' with our local repo:</p>
<pre><code>git remote add origin !!https url of repo!!
</code></pre>

<p>And finally, we can push the repo:</p>
<pre><code>git push -u origin --all  
</code></pre>

<p>You will be asked for your password for the remote service before the push will be fulfilled</p>
  </div>
<script>
$('.ui.menu .item')
  .tab({
    history: true,
    historyType: 'hash'
  })
;
</script>
   </div>



  <br><br>
  <div class="ui bottom fixed borderless menu">
    <div class="ui small item">
    <p id="footertext">
    Prepared by  Eamonn de Leastar (edeleastar@tssg.wit.ie) & John Fitzgerald (johnjfitzgerald@outlook.com). Except where otherwise noted, this content is licensed under a
     <a  href="http://creativecommons.org/licenses/by-nc/4.0/" title="External link to http://creativecommons.org/licenses/by-nc/4.0/"
       target="_blank">Creative Commons Attribution-NonCommercial 4.0 License
     </a>
     </p>
    </div>
  </div>    <script>

$(document).ready(function()
{
  $("img").addClass ("ui image");

  var images = $(".lab img");
  jQuery.each(images, function(i)  {
    if((images[i].alt).length > 0)
    {
      var div_img = $(document.createElement("div")).addClass("ui segment");
      $(images[i]).wrap(div_img);
      var div_label = $(document.createElement("div")).addClass("ui ribbon teal top attached label");
      div_label.append(images[i].alt);
      $(div_label).insertBefore(images[i]);
    }
  });
})    </script>

  </body>
 </html>